[![Build Status](https://api.travis-ci.org/mkishere/sshsyrup.svg)](http://travis-ci.org/mkishere/sshsyrup)
# Syrup
A simple SSH honeypot with abundant features

### Features
- SSH self-defined accounts and passwords, also allow any logins
- Records shell sessions and upload to [asciinema.org](https://asciinema.org)

### Installation
* Install Go
* Run the following command to get latest package and build it
```
# Dependencies
go get -u github.com/imdario/mergo
go get -u github.com/mattn/go-colorable
go get -u github.com/rifflock/lfshook
go get -u github.com/sirupsen/logrus
go get -u golang.org/x/crypto/ssh

go get -u github.com/mkishere/sshsyrup
cd ~/go/src/github.com/mkishere/sshsyrup
go build -ldflags "-s -w"
```
* Create config.json in the same directory as the binary
```json
{
    "server.addr": "0.0.0.0",
    "server.port": 22,
    "server.allowRandomUser": false,
    "server.userList": {
        "root": "*"
    }
}
```
* Generate SSH private key and renamed as id_rsa and put it in the same directory
```
ssh-keygen -t rsa
```
* Start the server
```
    sshsyrup
```
### Config params
Parameter Name | Description
-------------- | -----------
server.addr | Server address the honeypot will listen to. Default to _0.0.0.0_
server.port | Port number the honeypot will listen to. Default to _2222_
server.allowRandomUser | Allow user to login with any user names. Default to _false_
server.ident | Server identification string. Default to _SSH-2.0-OpenSSH_6.8p1_
server.maxConnections | Max connections allowed simutaneously. Default to _10_
server.userList | Contains a Map that has user name as key and password as value. Use asterisk '*' as password will allow any password to login to that account
asciinema.logfileprefix | Prefix to write asciinema compatible terminal replay files. Default to _test_
asciinema.apiEndpoint | The service endpoint for the replay to upload. Default to _https://asciinema.org_
asciinema.apiKey | The token ID generated by the `asciinema` command. If empty the file will not be uploaded to asciinema.org. You may find the key in ~/.config/asciinema/config

### Logging format
By default Syrup will create a logging file in _logs/_ directory with file name _yyyymmdd.log_ in JSON format.

When available, the log will provide the information in following fields:
Field Name | Description
---------- | -----------
clientStr | Client identification string
sessionId | Session ID in base64
srcIP | Client IP
time | Log time
user | User account client used to login
password | Password used by client to login, only available when logging in
cmd | The command user type in shell

### TODO
- Virtual File System
- Minimal set of POSIX commands
- Mock SFTP/SCP
